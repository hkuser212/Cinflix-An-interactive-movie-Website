<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='styles1.css') }}">
        <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&family=Sen:wght@400;700;800&display=swap"
            rel="stylesheet">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
            <!-- Swiper CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
        <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">

        <title>Movie Design</title>
    </head>
    
    <body>
        <div class="navbar">
            <div class="nav-logo">
              <a href="#">CINEFLIX</a>
            </div>
            <div class="nav-items">
              <ul>
                <li><a href="{{ url_for('routes.home')}}"> HOME </a></li>
                <li><a href="{{ url_for('routes.movie')}}"> MOVIES </a></li>
                <li><a href="{{ url_for('routes.tvshows')}}"> TV SHOWS </a></li>
                <li><a href="{{ url_for('routes.animes')}}"> ANIMES </a></li>

                <li><a href="{{ url_for('routes.genres2')}}"> GENRES </a></li>
                
              </ul>
            </div>
            {% block content %}

            <div class="search-bar">
                <form action="{{ url_for('routes.search') }}" method="POST">
                    <input type="text" name="query" placeholder="Search for movies..." required>
                    <button type="submit">Search</button>
                </form>
            </div>
            {% endblock %}

            <div class="nav-button">
                <div class="anim-layer"></div>
            
                {% if current_user.is_authenticated %}
                    <!-- Show Logout button if user is logged in -->
                    <a href="{{ url_for('routes.signout') }}">Logout</a>
                {% else %}
                    <!-- Show Sign In button if user is not logged in -->
                    <a href="{{ url_for('routes.signin') }}">Sign In</a>
                {% endif %}
            
            </div>
            
            
            <div id="hamburger-menu">&#9776;</div>
          </div>
      
          <div id="mobile-menu">
            <div class="mobile-nav-items">
              <ul>
                <li><a href="#"> Home </a></li>
                <li><a href="#"> Services </a></li>
                <li><a href="#"> About </a></li>
                <li><a href="#"> Contact </a></li>
                <li><a href="#"> Home </a></li>
              </ul>
            </div>
            <div class="mobile-nav-button">
              <div class="anim-layer"></div>
              <a href="#">Sign Up</a>
            </div>
            <div id="hamburger-cross">&#10006;</div>
          </div>

        
          <div class="slider">
            <!-- Slides will be dynamically generated -->
            <div id="slides-container">
              <!-- Example Slide (Dynamically Generated) -->
              <div class="slide">
                <div class="movie-image">
                  <img src="../static/images/TrendingShows/GamOfThrone.jpg" alt="Movie Poster">
                  <div class="play-button">▶</div>
                </div>
                <div class="movie-details">
                  <div class="tags">
                    <div class="tag">HD</div>
                    <div class="tag">Tv Show</div>
                    <div class="tag">2024</div>
                  </div>
                  <h2>Game Of Throne</h2>
                  <div class="rating">⭐⭐⭐⭐☆</div>
                  <p class="description">
                    While struggling with his dual identity, Arthur Fleck not only stumbles upon true love, but also finds the music that's always been inside him.
                  </p>
                  <a href="#" class="watch-now">Watch now</a>
                </div>
              </div>
            </div>
            <button class="nav-button22 prev" onclick="prevSlide()">❮</button>
            <button class="nav-button22 next" onclick="nextSlide()">❯</button>

          </div>
          


          <div class="movie-list-container">
            <h1 class="movie-list-title">TRENDING TV SHOWS</h1>
            <div class="movie-list-wrapper">
                <div class="movie-list">
                    {% for tv_show in trending_tv_shows %}
                        <div class="movie-list-item">
                            <!-- Dynamically load movie poster images -->
                            <img class="movie-list-item-img" src="https://image.tmdb.org/t/p/w500{{ tv_show.poster_path }}" alt="{{ tv_show.title }}">
                            <span class="movie-list-item-title">{{ tv_show.title }}</span>
                            <p class="movie-list-item-desc">{{ tv_show.overview[:100] }}...</p>
                            
                            <button class="movie-list-item-button" onclick="window.location.href='{{ url_for('routes.tv_show_details', tv_id=tv_show.id) }}';" >Watch</button>
                        </div>
                    {% endfor %}
                </div>
                <i class="fas fa-chevron-right arrow"></i>
            </div>
        </div>
        <div class="movie-list-container">
          <h1 class="movie-list-title"> UPCOMING TV SHOWS</h1>
          <div class="movie-list-wrapper">
              <div class="movie-list">
                  {% for tv_show in upcoming_tv_shows %}
                      <div class="movie-list-item">
                          <!-- Dynamically load movie poster images -->
                          <img class="movie-list-item-img" src="https://image.tmdb.org/t/p/w500{{ tv_show.poster_path }}" alt="{{ tv_show.title }}">
                          <span class="movie-list-item-title">{{ tv_show.title }}</span>
                          <p class="movie-list-item-desc">{{ tv_show.overview[:100] }}...</p>
                          
                          <button class="movie-list-item-button" onclick="window.location.href='{{ url_for('routes.tv_show_details', tv_id=tv_show.id) }}';">Watch</button>
                      </div>
                  {% endfor %}
              </div>
              <i class="fas fa-chevron-right arrow"></i>
          </div>
      </div>
      <div class="movie-list-container">
        <h1 class="movie-list-title">TOP RATED    TV SHOWS</h1>
        <div class="movie-list-wrapper">
            <div class="movie-list">
                {% for tv_show in top_rated_tv_shows %}
                    <div class="movie-list-item">
                        <!-- Dynamically load movie poster images -->
                        <img class="movie-list-item-img" src="https://image.tmdb.org/t/p/w500{{ tv_show.poster_path }}" alt="{{ tv_show.title }}">
                        <span class="movie-list-item-title">{{ tv_show.title }}</span>
                        <p class="movie-list-item-desc">{{ tv_show.overview[:100] }}...</p>
                        
                        <button class="movie-list-item-button" onclick="window.location.href='{{ url_for('routes.tv_show_details', tv_id=tv_show.id) }}';">Watch</button>
                    </div>
                {% endfor %}
            </div>
            <i class="fas fa-chevron-right arrow"></i>
        </div>
    </div>
                       

                <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>

    
                <footer>
                    <div class="content">
                      <div class="top">
                        <div class="logo-details">
                        
                          <span class="logo_name">CINEFLIX</span>
                        </div>
                      </div>
                      <div class="link-boxes">
                        <ul class="box">
                          <li class="link_name">Cineflix</li>
                          <li><a href="#">Home</a></li>
                          <li><a href="#">About us</a></li>
                        </ul>
                        <ul class="box">
                          <li class="link_name">Services</li>
                          <li><a href="#">Web development</a></li>
                          <li><a href="#">App development</a></li>
                          <li><a href="#">Logo design</a></li>
                          <li><a href="#">Card design</a></li>
                        </ul>
                        <ul class="box">
                          <li class="link_name">Account</li>
                          <li><a href="#">Profile</a></li>
                          <li><a href="#">My account</a></li>
                          <li><a href="#">Prefrences</a></li>
                          <li><a href="#">Purchase</a></li>
                        </ul>
                        <ul class="box">
                          <li class="link_name">Courses</li>
                          <li><a href="#">SEO</a></li>
                          <li><a href="#">Web design</a></li>
                          <li><a href="#">Programming</a></li>
                          <li><a href="#">Design</a></li>
                        </ul>
                        <ul class="box input-box">
                          <li class="link_name">Subscribe to newsletter</li>
                          <li><input type="text" placeholder="Enter your email"></li>
                          <li><input type="button" value="Subscribe"></li>
                        </ul>
                      </div>
                    </div>
                    <div class="bottom-details">
                      <div class="bottom_text">
                        <span class="copyright_text">Copyright © 2023 <a href="#">CINEFLIX </a>All rights reserved</span>
                        <span class="policy_terms">
                          <a href="#">Privacy policy</a>
                          <a href="#">Terms & condition</a>
                        </span>
                      </div>
                    </div>
                </footer>
               
            
    
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
 
               
        
        

        
   
    

<script>
      let currentIndex = 0;  // Keeps track of the current slide
    let slides = [];  // Initialize an empty array to hold the slides
    const slidesContainer = document.getElementById('slides-container');  // The container where slides are inserted
    const prevButton = document.querySelector('.prev');
    const nextButton = document.querySelector('.next');
    
    // Fetch and display movies
    async function fetchTvShows() {
      try {
        const response = await fetch('/tv_shows/popular'); // Replace with your actual backend route
        const data = await response.json();
    
        if (data.error) {
          console.error(data.error);
          return;
        }
    
        // Create and insert slides dynamically
        slides = data.results.map(tvShow => {
          const slide = document.createElement('div');
          slide.classList.add('slide');  // Add class to each slide
          slide.innerHTML = `
           <div class="movie-image">
          <img src="https://image.tmdb.org/t/p/w500/${tvShow.poster_path}" alt="${tvShow.name}">
          <div class="play-button">▶</div>
        </div>
        <div class="movie-details">
          <div class="tags">
            <div class="tag">HD</div>
            <div class="tag">TV Show</div>
            <div class="tag">${new Date(tvShow.first_air_date).getFullYear()}</div>
          </div>
          <h2>${tvShow.name}</h2>
          <div class="rating">⭐ ${tvShow.vote_average.toFixed(1)}</div>
          <p class="description">${tvShow.overview.substring(0, 150)}...</p>
          <a href="#" class="watch-now">Watch now</a>
        </div>
          `;
          slidesContainer.appendChild(slide);  // Append the slide to the container
          return slide;  // Return the slide element for later use
        });
    
        updateSlidePosition(slides,slidesContainer,currentIndex);  // Update the position to display the first slide correctly
      } catch (error) {
        console.error('Error fetching movies:', error);
      }
    }
    
    // Show the next slide
    function nextSlide() {
      if (slides.length === 0) return;  // Ensure there are slides before navigating
    
      if (currentIndex < slides.length - 1) {
        currentIndex++;
      } else {
        currentIndex = 0;  // Loop back to the first slide
      }
      updateSlidePosition();
    }
    
    // Show the previous slide
    function prevSlide() {
      if (slides.length === 0) return;  // Ensure there are slides before navigating
    
      if (currentIndex > 0) {
        currentIndex--;
      } else {
        currentIndex = slides.length - 1;  // Loop back to the last slide
      }
      updateSlidePosition();
    }
    
    // Update the position of the slides to show the correct one
    function updateSlidePosition() {
      if (slides.length === 0) return;  // Ensure there are slides to update
    
      const slideWidth = slides[0].offsetWidth;  // Get the width of the slides
      slidesContainer.style.transform = `translateX(-${slideWidth * currentIndex}px)`;  // Move the slides container to show the current slide
    }
    
    // Attach event listeners to navigation buttons
    prevButton.addEventListener('click', prevSlide);
    nextButton.addEventListener('click', nextSlide);
    
    // Fetch movies when the page loads
    document.addEventListener('DOMContentLoaded', fetchTvShows);
    
</script>
</body>
</html>